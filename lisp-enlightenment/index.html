<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 05/26/2023 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>On Lisp Enlightenment</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="David Bjergaard" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../style.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">On Lisp Enlightenment</h1>
<div class="org">

</div>
<p>
Common Lisp is hard to learn and won't turn you into an elite hacker.
If you are interested in my journey, read on. In college, my research
advisor used Emacs. Naturally, I was <a href="https://churchofemacs.org/">indoctrinated into the church</a>.
Eventually, I would discover the delightful text manipulation language
that is Vim. By that point I had been such a heavy user of Emacs, <a href="https://github.com/emacs-evil/evil">evil</a>
was the only way I could reasonably run Vim.
</p>

<p>
Emacs, for the uninitiated,<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> is configured in a dialect of Lisp
called Emacs Lisp. After a few years of copy-pasting spells into my
<code>.emacs</code>, I wanted to be able to develop my own magic. The development
of any skill begins with research, and ends with practice. I learned
about <a href="https://lisp-lang.org/">Common Lisp</a>, and <a href="https://www.scheme.org/">Scheme</a>, and "<a href="https://web.mit.edu/6.001/6.037/sicp.pdf">The Structure and Interpretation
of Computer Programs</a>" (SICP). I read "<a href="https://mitpress.mit.edu/9780262560993/the-little-schemer/">The Little Schemer</a>".
</p>

<p>
I desperately wanted the <a href="https://lispers.org/">Lisp enlightenment</a>. A moment when the
parentheses would fall away and programming would become as effortless
as thinking. The code and data would merge together and
<a href="https://stackoverflow.com/questions/1042066/looking-for-clisp-examples-of-mini-languages-that-is-dsls">domain-specific languages</a> would just appear to me and solve the
problem in front of me.
</p>

<p>
Here's the thing though, it never came. I tried so hard. At some point
in my lisp travels I discovered <a href="http://stumpwm.github.io/">StumpWM</a>. A tiling window manager
written in Common Lisp. Surely, if used this every day I would have to
learn lisp, and the enlightenment would follow.
</p>

<p>
I did have some important insights into programming. The exercises in
SICP truly changed the way I approached coding. Learning about layers
of abstraction and functions as first-class citizens were revelatory.
I eventually started maintaining StumpWM as an open-source project. It
got a new lease on life, and I got an extremely rewarding hobby. I
didn't (and still don't) write very much lisp for StumpWM<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>. I did
learn an awful lot about X11 though.
</p>

<p>
I think the lisp enlightenment is oversold. Common Lisp is a nice
language, and knowing it (and other dialects) has allowed me to notice
and appreciate its influences in other languages (notably <a href="https://mathematica.stackexchange.com/questions/4203/is-there-a-mathematica-lisp-link">Mathematica</a>
and <a href="https://stackoverflow.com/questions/5030285/is-ecmascript-really-a-dialect-of-lisp">JavaScript</a><sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>). It has some really uncomfortable gotchas that new
users immediately cut their fingers on.
</p>

<p>
The first is which lisp? <a href="https://www.scheme.org/">Scheme</a>, <a href="https://lisp-lang.org/">Common Lisp</a>, and <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/index.html">Emacs Lisp</a> are just
a few branches of a very confusing tree. Suppose you settle on Common
Lisp, now you have to decide on which implementation. Do you choose
<a href="https://ccl.clozure.com/">Clozure Common Lisp</a>? <a href="http://www.sbcl.org/">Steel Bank Common Lisp</a>? <a href="https://cmucl.org/">CMUCL</a>, <a href="https://www.gnu.org/software/gcl/">GCL</a>, <a href="https://franz.com/products/allegrocl/">ACL</a>?
</p>

<p>
Let's assume the intrepid lisp hacker (ILH) installs SBCL, when you
invoke it on the command line you are greeted with:
</p>
<pre class="example">

This is SBCL 2.1.11.debian, an implementation of ANSI Common Lisp.
More information about SBCL is available at &lt;http://www.sbcl.org/&gt;.

SBCL is free software, provided as is, with absolutely no warranty.
It is mostly in the public domain; some portions are provided under
BSD-style licenses.  See the CREDITS and COPYING files in the
distribution for more information.
*
</pre>

<p>
This interface is next to useless, there's no readline support, no
ability to move through the history, and no easy way to edit lisp
forms. Our ILH needs to embed their lisp implementation in an
environment (Emacs is the only real game in town, sorry vim users!).
</p>

<p>
Let's assume our ILH is undeterred and manages to get a viable
environment set up. Maybe they even discover <a href="https://www.quicklisp.org/beta/">Quicklisp</a> and a decent
language tutorial. They start writing a non-trivial program and are
beginning to get confident with all the parentheses. Inevitably they
will write something like this:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(if (= i 10)
    (print "i is 10!")
    (* i 2)
    (+ i 3))
</pre>
</div>

<p>
Assuming that <code>i</code> is 10, users of other languages may assume that it
will print "i is 10!" and <code>i</code> will have the value 23 when this is all
done. In fact, this will signal an error because <code>if</code> only takes three
expressions, the condition, and two expressions for true or false
cases.
</p>

<p>
Our ILH will discover that when no 'else' is needed they should use
<code>when</code> and <code>unless</code>. Someday they'll need an honest <code>if</code> clause, but
they'll need multiple sub-expressions and they'll discover <code>progn</code>:
</p>
<div class="org-src-container">
<pre class="src src-lisp">(if (= i 10)
    (progn (print "i is 10!")
	   (* i 2))
    (+ i 3))
</pre>
</div>
<p>
But <code>progn</code> isn't "Lispy", to be idiomatic they should use <code>cond</code>.
</p>

<p>
Our ILH continues their journey, and since Lisp goes way back, they
have to learn the difference between <code>car</code> and <code>cdr</code>. In the same
breath that they learn this, they also learn that the modern
equivalents <code>first</code> and <code>rest</code> are preferred. Culturally, everyone
still uses <code>car</code> and <code>cdr</code>.
</p>

<p>
This is just a small slice of the friction that comes up when getting
started with developing in Common Lisp. I'm not even touching <code>asdf</code>,
package management, and compilation. Developing in Lisp comes with
significant upfront costs to get started.
</p>

<p>
If you're getting started in Common Lisp, be patient. At some point,
all of the quirks and idiosyncrasies will feel normal<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>. If you
have started exploring Lisp to level up your programming skills, read
SICP and do the exercises. If you are interested in Lisp for its
<a href="https://en.wikipedia.org/wiki/Homoiconicity">homoiconicity</a>, or <a href="https://docs.racket-lang.org/htdp-langs/index.html">language design</a>, learn racket and implement '<a href="https://github.com/kanaka/mal">make a
lisp</a>' in your favorite language. If you want a weird, crufty, window
managing experience, come try StumpWM!
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
If you're reading this&#x2026; you are probably initiated.  
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
This is a topic for another post. It has been one of the most
rewarding, and frustrating, experiences that I've had.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
Incidentally, <a href="https://mitpress.mit.edu/9780262543231/structure-and-interpretation-of-computer-programs/">SICP was re-released recently with JavaScript</a> as
its main language.  I think it this was the right move, and have found
JavaScript delightful to develop.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
I got burned hard by the <code>if</code> example and it was hard to write
today without it feeling very wrong.
</p></div></div>


</div>
</div></div>
</body>
</html>
